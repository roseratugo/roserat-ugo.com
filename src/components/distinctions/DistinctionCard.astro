---
import type { Lang } from '../../i18n/utils';

interface Props {
  distinction: {
    id: string;
    type: 'winner' | 'participant' | 'mentor' | 'organizer';
    event: { fr: string; en: string };
    description: { fr: string; en: string };
    date: Date;
    location: string;
    url?: string;
  };
  lang: Lang;
}

const { distinction, lang } = Astro.props;

const typeLabels = {
  winner: { fr: 'Vainqueur', en: 'Winner' },
  participant: { fr: 'Participant', en: 'Participant' },
  mentor: { fr: 'Mentor', en: 'Mentor' },
  organizer: { fr: 'Fondateur', en: 'Founder' },
};

const formattedDate = new Date(distinction.date).toLocaleDateString(lang === 'fr' ? 'fr-FR' : 'en-US', {
  year: 'numeric',
  month: 'long',
});
---

<div class="distinction-card" data-tilt="6">
  <div class="card-glow"></div>
  <div class="card-header">
    <span class:list={['badge', distinction.type === 'winner' && 'badge-winner']}>
      {distinction.type === 'winner' && (
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="12" height="12" class="badge-icon">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-2.927 0" />
        </svg>
      )}
      {typeLabels[distinction.type][lang]}
    </span>
    <span class="date">{formattedDate}</span>
  </div>

  <h3 class="card-title">
    <span class="title-text">{distinction.event[lang]}</span>
  </h3>
  <p class="card-desc">{distinction.description[lang]}</p>

  <div class="card-footer">
    <span class="location">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="16" height="16">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z" />
      </svg>
      {distinction.location}
    </span>
    {distinction.url && (
      <a href={distinction.url} target="_blank" rel="noopener noreferrer" class="card-link" data-magnetic>
        {lang === 'fr' ? 'En savoir plus' : 'Learn more'}
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" width="14" height="14">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
        </svg>
      </a>
    )}
  </div>
  <div class="card-shine"></div>
</div>

<style>
  .distinction-card {
    position: relative;
    background-color: var(--color-paper-warm);
    padding: 1.5rem;
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    overflow: hidden;
    border: 1px solid transparent;
  }

  .distinction-card:hover {
    transform: translateY(-4px);
    border-color: color-mix(in srgb, var(--color-accent) 20%, transparent);
    box-shadow:
      0 20px 40px rgba(0, 0, 0, 0.05),
      0 0 0 1px color-mix(in srgb, var(--color-accent) 10%, transparent);
  }

  .card-glow {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--color-accent) 0%, transparent 100%);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s ease;
  }

  .distinction-card:hover .card-glow {
    transform: scaleX(1);
  }

  .card-shine {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.1),
      transparent
    );
    transition: left 0.5s ease;
    pointer-events: none;
  }

  .distinction-card:hover .card-shine {
    left: 100%;
  }

  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1rem;
    position: relative;
    z-index: 1;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 0.25rem 0.75rem;
    background-color: color-mix(in srgb, var(--color-accent) 10%, transparent);
    color: var(--color-accent);
    transition: all 0.3s ease;
  }

  .badge-icon {
    flex-shrink: 0;
  }

  .badge-winner {
    background-color: var(--color-accent);
    color: #ffffff;
    animation: badgePulse 2s ease infinite;
  }

  @keyframes badgePulse {
    0%, 100% {
      box-shadow: 0 0 0 0 color-mix(in srgb, var(--color-accent) 40%, transparent);
    }
    50% {
      box-shadow: 0 0 0 8px transparent;
    }
  }

  .date {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--color-ink-muted);
  }

  .card-title {
    font-family: var(--font-display);
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-ink);
    margin-bottom: 0.5rem;
    overflow: hidden;
    position: relative;
    z-index: 1;
  }

  .title-text {
    display: inline-block;
    transition: transform 0.3s ease;
  }

  .distinction-card:hover .title-text {
    transform: translateX(4px);
  }

  .card-desc {
    font-size: 0.875rem;
    color: var(--color-ink-light);
    line-height: 1.6;
    margin-bottom: 1rem;
    position: relative;
    z-index: 1;
  }

  .card-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    z-index: 1;
  }

  .location {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.875rem;
    color: var(--color-ink-muted);
    transition: color 0.3s ease;
  }

  .distinction-card:hover .location {
    color: var(--color-ink);
  }

  .card-link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-accent);
    transition: gap 0.2s ease;
  }

  .card-link:hover {
    gap: 0.625rem;
  }
</style>
